{"ast":null,"code":"var _jsxFileName = \"F:\\\\8avo Sem\\\\TallerDesarrollo\\\\Nahual-Autenticacion-Admin\\\\src\\\\components\\\\solicitudAcceso\\\\FormularioDeSolicitud.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from \"react-router-dom\";\nimport { Button } from 'semantic-ui-react';\nimport { Form, Input, TextArea, Field } from 'semantic-ui-react-form-validator';\nimport CryptoJS from 'crypto-js';\nimport axios from 'axios';\nimport MensajeResultante from './tipo-mensaje/MensajeResultante.js';\nimport '../../public/Stylesheets/FormularioDeSolicitud.css';\nconst rutaSolicitudes = 'https://nahual-auth-api.herokuapp.com/api/solicitudes';\n\nfunction prepararEstadoAPartirDe(desencriptado) {\n  return {\n    nombre: desencriptado.nombre,\n    correo: desencriptado.correo,\n    origen: desencriptado.origen,\n    redirigirA: desencriptado.redirigir,\n    motivo: '',\n    permitido: true,\n    exito: null\n  };\n}\n\nexport default class FormularioDeSolicitud extends Component {\n  constructor(props) {\n    super();\n\n    this.onChangeInput = (e, {\n      value,\n      name\n    }) => {\n      let valor = this.state[e.target.name];\n      let nombre = e.target.name;\n      this.setState({\n        [nombre]: value\n      });\n      valor = value;\n      this.state[e.target.name] = valor;\n    };\n\n    this.enConfirmacion = evento => {\n      evento.preventDefault();\n      var estadoDepurado = {\n        nombre: this.state.nombre,\n        email: this.state.correo,\n        razon: this.state.motivo,\n        aplicacion: this.state.origen\n      };\n      axios.post(rutaSolicitudes, estadoDepurado).then(function (respuesta) {\n        this.setState({\n          exito: true\n        });\n        setTimeout(() => {\n          this.setState({\n            exito: null\n          });\n          window.location.replace(this.state.redirigirA);\n        }, 4000);\n      }.bind(this)).catch(function (error) {\n        this.setState({\n          exito: false\n        });\n        console.log(error);\n        setTimeout(() => {\n          this.setState({\n            exito: null\n          });\n        }, 5000);\n      }.bind(this));\n    };\n\n    this.state = {\n      nombre: \"\",\n      correo: \"\",\n      origen: \"\",\n      motivo: \"\",\n      redirigirA: \"\",\n      permitido: true,\n      exito: null\n    };\n  }\n\n  componentDidMount() {\n    try {\n      let params = new URL(window.location.href).searchParams;\n      let searchParams = new URLSearchParams(params);\n      var datos = searchParams.get('datos');\n\n      var AES = require(\"crypto-js/aes\");\n\n      var desencriptado = JSON.parse(AES.decrypt(datos, 'Nahual123').toString(CryptoJS.enc.Utf8));\n      this.setState(prepararEstadoAPartirDe(desencriptado));\n    } catch (error) {\n      this.setState({\n        permitido: false\n      });\n    }\n  }\n\n  render() {\n    if (this.state.permitido) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        id: \"myForm\",\n        className: \"ui form\",\n        onSubmit: this.enConfirmacion,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        name: \"nombre\",\n        validators: ['required', 'matchRegexp:^[A-Za-z ]+$'],\n        errorMessages: ['Este campo es requerido', 'El campo no acepta valores numéricos'],\n        value: this.state.nombre,\n        id: \"form-input-control-first-name\",\n        label: \"Nombre completo\",\n        placeholder: \"Nombre completo\",\n        width: 16,\n        disabled: true,\n        onChange: this.onChangeInput,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        name: \"correo\",\n        type: \"email\",\n        id: \"form-input-control-error-email\",\n        label: \"Correo\",\n        placeholder: \"ejemplo@****.com\",\n        validators: ['required'],\n        errorMessages: ['Este campo es requerido'],\n        value: this.state.correo,\n        width: 16,\n        disabled: true,\n        onChange: this.onChangeInput,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(TextArea, {\n        name: \"motivo\",\n        type: \"text\",\n        id: \"form-textarea-control-opinion\",\n        label: \"Motivo\",\n        placeholder: \"Cu\\xE9ntenos su raz\\xF3n para ingresar a la aplicaci\\xF3n...\",\n        validators: ['required'],\n        errorMessages: ['Este campo es requerido'],\n        value: this.state.motivo,\n        onChange: this.onChangeInput,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        className: \"boton_confirm\",\n        onSubmit: this.enConfirmacion,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }\n      }, \"Confirmar\")), this.state.exito === true && /*#__PURE__*/React.createElement(MensajeResultante, {\n        encabezadoDelMensaje: \"Solicitud exitosa\",\n        cuerpoDelMensaje: \"Espere por favor hasta que se apruebe su solicitud, volver\\xE1 a la p\\xE1gina anterior\",\n        colorDeFondo: \"green\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }\n      }), this.state.exito === false && /*#__PURE__*/React.createElement(MensajeResultante, {\n        encabezadoDelMensaje: \"Solicitud no exitosa\",\n        cuerpoDelMensaje: \"Hubo un error al momento de enviar, intente de nuevo m\\xE1s tarde\",\n        colorDeFondo: \"red\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }\n      });\n    }\n  }\n\n}","map":{"version":3,"sources":["F:/8avo Sem/TallerDesarrollo/Nahual-Autenticacion-Admin/src/components/solicitudAcceso/FormularioDeSolicitud.js"],"names":["React","Component","Redirect","Button","Form","Input","TextArea","Field","CryptoJS","axios","MensajeResultante","rutaSolicitudes","prepararEstadoAPartirDe","desencriptado","nombre","correo","origen","redirigirA","redirigir","motivo","permitido","exito","FormularioDeSolicitud","constructor","props","onChangeInput","e","value","name","valor","state","target","setState","enConfirmacion","evento","preventDefault","estadoDepurado","email","razon","aplicacion","post","then","respuesta","setTimeout","window","location","replace","bind","catch","error","console","log","componentDidMount","params","URL","href","searchParams","URLSearchParams","datos","get","AES","require","JSON","parse","decrypt","toString","enc","Utf8","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Redirect } from \"react-router-dom\"\r\nimport {Button } from 'semantic-ui-react'\r\nimport {Form, Input, TextArea, Field } from 'semantic-ui-react-form-validator';\r\nimport CryptoJS from 'crypto-js';\r\nimport axios  from 'axios';\r\nimport MensajeResultante from './tipo-mensaje/MensajeResultante.js';\r\nimport '../../public/Stylesheets/FormularioDeSolicitud.css'\r\n\r\nconst rutaSolicitudes = 'https://nahual-auth-api.herokuapp.com/api/solicitudes';\r\n\r\nfunction prepararEstadoAPartirDe(desencriptado){\r\n    return ({\r\n        nombre: desencriptado.nombre,\r\n        correo: desencriptado.correo,\r\n        origen: desencriptado.origen,\r\n        redirigirA: desencriptado.redirigir,\r\n        motivo: '',\r\n        permitido : true,\r\n        exito: null\r\n    });\r\n}\r\n\r\nexport default class FormularioDeSolicitud extends Component {\r\n   \r\n    constructor(props){\r\n        \r\n        super();\r\n        this.state = {\r\n            nombre: \"\",\r\n            correo: \"\",\r\n            origen: \"\",\r\n            motivo: \"\",\r\n            redirigirA: \"\",  \r\n            permitido: true,\r\n            exito: null\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        try {\r\n            let params = (new URL(window.location.href)).searchParams;\r\n            let searchParams = new URLSearchParams(params);\r\n            var datos = searchParams.get('datos');\r\n\r\n            var AES = require(\"crypto-js/aes\");\r\n            var desencriptado = JSON.parse(AES.decrypt(datos, 'Nahual123').toString(CryptoJS.enc.Utf8));\r\n            this.setState(prepararEstadoAPartirDe(desencriptado));   \r\n            \r\n        } catch (error) {\r\n            this.setState({permitido:false});\r\n        }\r\n    }\r\n\r\n    onChangeInput = (e, {value, name}) => {\r\n        let valor = this.state[e.target.name];\r\n        let nombre = e.target.name;\r\n        this.setState({[nombre]: value})\r\n        valor = value;\r\n        this.state[e.target.name] = valor;\r\n    }\r\n\r\n    enConfirmacion = (evento) => {\r\n        evento.preventDefault();\r\n        var estadoDepurado = { \r\n            nombre: this.state.nombre,\r\n            email: this.state.correo,\r\n            razon: this.state.motivo,\r\n            aplicacion: this.state.origen\r\n        }\r\n        axios.post(rutaSolicitudes, estadoDepurado)\r\n        .then(function (respuesta){\r\n            this.setState({exito:true});\r\n            setTimeout(() => { this.setState({ exito: null }); window.location.replace(this.state.redirigirA);}, 4000); \r\n            \r\n        }.bind(this))\r\n        .catch(function(error){\r\n            this.setState({exito:false});\r\n            console.log(error);\r\n            setTimeout(() => { this.setState({ exito: null }); }, 5000); \r\n        }.bind(this));\r\n    }\r\n    \r\n    render() {\r\n        if((this.state.permitido)){      \r\n            return (\r\n                <div>\r\n                    <Form id=\"myForm\" className=\"ui form\" onSubmit={this.enConfirmacion}>\r\n                    <Input \r\n                        name = \"nombre\" \r\n                        validators={['required','matchRegexp:^[A-Za-z ]+$']} \r\n                        errorMessages={['Este campo es requerido', 'El campo no acepta valores numéricos']} \r\n                        value = {this.state.nombre}\r\n                        id='form-input-control-first-name'\r\n                        label='Nombre completo'\r\n                        placeholder='Nombre completo'\r\n                        width={16}\r\n                        disabled\r\n                        onChange={this.onChangeInput}\r\n                    />\r\n                    <Input\r\n                        name=\"correo\"\r\n                        type=\"email\"\r\n                        id='form-input-control-error-email'\r\n                        label='Correo'\r\n                        placeholder='ejemplo@****.com'\r\n                        validators={['required']} \r\n                        errorMessages={['Este campo es requerido']} \r\n                        value = {this.state.correo}\r\n                        width={16}\r\n                        disabled\r\n                        onChange={this.onChangeInput}\r\n                    />\r\n                    <TextArea\r\n                        name = \"motivo\" \r\n                        type=\"text\"\r\n                        id='form-textarea-control-opinion'\r\n                        label='Motivo'\r\n                        placeholder='Cuéntenos su razón para ingresar a la aplicación...'\r\n                        validators={['required']} \r\n                        errorMessages={['Este campo es requerido']} \r\n                        value = {this.state.motivo}\r\n                        onChange={this.onChangeInput}\r\n                    />\r\n                    <Button type='submit' className=\"boton_confirm\" onSubmit={this.enConfirmacion}>Confirmar</Button>\r\n                </Form>\r\n                {(this.state.exito === true) && (\r\n                <MensajeResultante encabezadoDelMensaje= \"Solicitud exitosa\" cuerpoDelMensaje=\"Espere por favor hasta que se apruebe su solicitud, volverá a la página anterior\" colorDeFondo=\"green\"/>)}\r\n                {(this.state.exito === false) && (\r\n                <MensajeResultante encabezadoDelMensaje= \"Solicitud no exitosa\" cuerpoDelMensaje=\"Hubo un error al momento de enviar, intente de nuevo más tarde\" colorDeFondo=\"red\"/>)}\r\n            </div>\r\n            )     \r\n        }\r\n        else{\r\n            return(\r\n                <Redirect to=\"/error\"/>\r\n            )\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}